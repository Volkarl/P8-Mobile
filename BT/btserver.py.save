from bluetooth import *
import os
import sys
from threading import Thread

def handleClient():
	print("hello")

def main(args):
	server_sock = BluetoothSocket(RFCOMM)
	server_port = PORT_ANY
	server_address = '', server_port

	server_sock.bind(server_address)
	server_sock.listen(1)

	uuid = '94f39d29-7d6d-437d-973b-fba39e49d4ee'
	advertise_service(server_sock, name="CreamPi",service_id=uuid,
				service_classes=[SERIAL_PORT_CLASS],
				profiles=[SERIAL_PORT_PROFILE])

	print('Listening for client, on port ', server_port, '...')

	while(True):
		client_sock, addr = server_sock.accept()
		#t = Thread(handleClient, server_sock.accept())
		print('Connection from ', addr)
		data = client_sock.recv(1024)
		print('Received ' + data.decode('utf-8'))

		
		client_soc

	server_sock.close()


if __name__ == '__main__':
	main(sys.argv)
